{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1>Weekly Summary</h1>

    {% if not request.user.is_authenticated %}
    <div class="alert alert-info" role="alert">
        <p><strong>Welcome!</strong> You are currently not logged in. Please <a href="{% url 'login' %}">log in</a> or <a href="{% url 'signup' %}">sign up</a> to start tracking your exercises.</p>
    </div>
    {% else %}
    <div class="row">
    <div class="row">
        {% for summary in summaries %}
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5>{{ summary.date|date:"l, M d" }}</h5>
                        <p>Total Calories Burned: {{ summary.total_calories_burned }}</p>
                        <svg width="100%" height="10">
                            <rect width="100%" height="10" fill="#e0e0e0"></rect>
                            <rect width="{{ summary.progress_burned }}%" height="10" fill="#ff5722"></rect>
                        </svg>
                        <p>Goal Progress: {{ summary.progress_burned }}%</p>

                        <p>Total Time Spent: {{ summary.total_time_spent }} minutes</p>
                        <svg width="100%" height="10">
                            <rect width="100%" height="10" fill="#e0e0e0"></rect>
                            <rect width="{{ summary.progress_time }}%" height="10" fill="#4caf50"></rect>
                        </svg>
                        <p>Goal Progress: {{ summary.progress_time }}%</p>

                        <p>Total Calories Eaten: {{ summary.total_calories_eaten }}</p>
                        <svg width="100%" height="10">
                            <rect width="100%" height="10" fill="#e0e0e0"></rect>
                            <rect width="{{ summary.progress_eaten }}%" height="10" fill="#2196f3"></rect>
                        </svg>
                        <p>Goal Progress: {{ summary.progress_eaten }}%</p>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}
